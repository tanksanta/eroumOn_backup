<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="entrps">

	<resultMap type="entrpsVO" id="entrpsVOMap" autoMapping="true" />

	<sql id="listColumn">
		entrps_no
		, entrps_nm
		, brno
		, rprsv_nm
		, induty
		, bizcnd
		, zip
		, addr
		, daddr
		, telno
		, fxno
		, eml
		, tkcg_md
		, use_yn
		, dlvy_ct_cnd
		, dlvy_base_ct
		, clcln_cycle
		, bank_nm
		, actno
		, dpstr
		, ctrt_bgng_ymd
		, ctrt_end_ymd
		, ctrt_ymd
		, fee
		, pic_nm
		, pic_telno
		, pic_telno_hp
		, pic_eml
		, pic_job
		, reg_unique_id
		, reg_dt
		, reg_id
		, rgtr
		, mdfcn_unique_id
		, mdfcn_dt
		, mdfcn_id
		, mdfr
	</sql>

	<sql id="searchConditions">
		<if test="srchText != null and srchText != '' ">
			<choose>
				<when test='srchTarget != null and srchTarget == "C" '>AND entrps_nm like CONCAT('%', #{srchText}, '%')</when>
				<when test='srchTarget != null and srchTarget == "N" '>AND brno like CONCAT('%',#{srchText},'%')</when>
				<when test='srchTarget != null and srchTarget == "M" '>AND pic_nm like CONCAT('%',#{srchText},'%')</when>
			</choose>
		</if>
		<if test="srchYn != null and srchYn != '' ">
			AND use_yn = #{srchYn}
		</if>
	</sql>

	<select id="selectEntrpsListVO" parameterType="java.util.HashMap" resultMap="entrpsVOMap">
		/* Query ID : entrps.xml > selectEntrpsListVO */
		SELECT
			<include refid="listColumn"/>
		FROM ENTRPS
		WHERE 1=1
			<include refid="searchConditions" />
	  	ORDER BY entrps_no DESC
	  	LIMIT #{startNum}, #{endNumMysql}
	</select>

	<select id="selectEntrpsListAll" parameterType="java.util.HashMap" resultMap="entrpsVOMap">
		/* Query ID : entrps.xml > selectEntrpsListAll */
		SELECT
			<include refid="listColumn"/>
		FROM ENTRPS
		WHERE 1=1
		 	<include refid="searchConditions" />
		ORDER BY entrps_no DESC
	</select>

	<select id="selectEntrpsCount" parameterType="java.util.HashMap" resultType="int">
		/* Query ID : entrps.xml > selectEntrpsCount */
		SELECT	COUNT(*)
		FROM	ENTRPS
		WHERE	1=1
		<include refid="searchConditions"/>
	</select>

	<select id="selectEntrps" parameterType="java.util.HashMap" resultMap="entrpsVOMap">
		/* Query ID : entrps.xml > selectEntrps */
		SELECT
		<include refid="listColumn"/>
		FROM	ENTRPS
		WHERE  entrps_no = #{entrpsNo}
	</select>
	
	<select id="selectEntrpsByGdsNo" parameterType="java.util.HashMap" resultMap="entrpsVOMap">
		/* Query ID : entrps.xml > selectEntrpsByGdsNo */
		SELECT E.entrps_no, E.entrps_nm
		FROM   ENTRPS E
		JOIN   GDS G  ON E.entrps_no = G.entrps_no
		WHERE  G.gds_no = #{srchGdsNo}
	</select>

	<insert id="insertEntrps" parameterType="entrpsVO">
	/* Query ID : entrps.xml > insertEntrps */
	INSERT INTO ENTRPS (
		entrps_nm
		, brno
		, rprsv_nm
		, induty
		, bizcnd
		, zip
		, addr
		, daddr
		, telno
		, fxno
		, eml
		, tkcg_md
		, use_yn
		, dlvy_ct_cnd
		, dlvy_base_ct
		, clcln_cycle
		, bank_nm
		, actno
		, dpstr
		, ctrt_bgng_ymd
		, ctrt_end_ymd
		, ctrt_ymd
		, fee
		, pic_nm
		, pic_telno
		, pic_telno_hp
		, pic_eml
		, pic_job
		, reg_unique_id
		, reg_dt
		, reg_id
		, rgtr
		) VALUES (
		#{entrpsNm, jdbcType=VARCHAR}
		, #{brno, jdbcType=VARCHAR}
		, #{rprsvNm, jdbcType=VARCHAR}
		, #{induty, jdbcType=VARCHAR}
		, #{bizcnd, jdbcType=VARCHAR}
		, #{zip, jdbcType=VARCHAR}
		, #{addr, jdbcType=VARCHAR}
		, #{daddr, jdbcType=VARCHAR}
		, #{telno}
		, #{fxno}
		, #{eml}
		, #{tkcgMd, jdbcType=VARCHAR}
		, #{useYn, jdbcType=VARCHAR}
		, #{dlvyCtCnd}
		, #{dlvyBaseCt}
		, #{clclnCycle, jdbcType=VARCHAR}
		, #{bankNm, jdbcType=VARCHAR}
		, #{actno, jdbcType=VARCHAR}
		, #{dpstr, jdbcType=VARCHAR}
		, #{ctrtBgngYmd}
		, #{ctrtEndYmd}
		, #{ctrtYmd}
		, #{fee}
		, #{picNm, jdbcType=VARCHAR}
		, #{picTelno}
		, #{picTelnoHp}
		, #{picEml}
		, #{picJob, jdbcType=VARCHAR}
		, #{regUniqueId, jdbcType=VARCHAR}
		, SYSDATE()
		, #{regId, jdbcType=VARCHAR}
		, #{rgtr, jdbcType=VARCHAR}
		)
</insert>

<update id="updateEntrps" parameterType="entrpsVO">
		/* Query ID : entrps.xml > updateEntrps */
		UPDATE ENTRPS SET
			entrps_nm = #{entrpsNm, jdbcType=VARCHAR}
			, brno = #{brno, jdbcType=VARCHAR}
			, rprsv_nm = #{rprsvNm, jdbcType=VARCHAR}
			, induty = #{induty, jdbcType=VARCHAR}
			, bizcnd = #{bizcnd, jdbcType=VARCHAR}
			, zip = #{zip, jdbcType=VARCHAR}
			, addr = #{addr, jdbcType=VARCHAR}
			, daddr = #{daddr, jdbcType=VARCHAR}
			, telno = #{telno}
			, fxno = #{fxno}
			, eml = #{eml}
			, tkcg_md = #{tkcgMd, jdbcType=VARCHAR}
			, use_yn = #{useYn, jdbcType=VARCHAR}
			, dlvy_ct_cnd = #{dlvyCtCnd}
			, dlvy_base_ct = #{dlvyBaseCt}
			, clcln_cycle = #{clclnCycle, jdbcType=VARCHAR}
			, bank_nm = #{bankNm, jdbcType=VARCHAR}
			, actno = #{actno, jdbcType=VARCHAR}
			, dpstr = #{dpstr, jdbcType=VARCHAR}
			, ctrt_bgng_ymd = #{ctrtBgngYmd}
			, ctrt_end_ymd = #{ctrtEndYmd}
			, ctrt_ymd = #{ctrtYmd}
			, fee = #{fee}
			, pic_nm = #{picNm, jdbcType=VARCHAR}
			, pic_telno = #{picTelno}
			, pic_telno_hp = #{picTelnoHp}
			, pic_eml = #{picEml}
			, pic_job = #{picJob, jdbcType=VARCHAR}
			, mdfcn_unique_id = #{mdfcnUniqueId, jdbcType=VARCHAR}
			, mdfcn_dt = SYSDATE()
			, mdfcn_id = #{mdfcnId, jdbcType=VARCHAR}
			, mdfr = #{mdfr, jdbcType=VARCHAR}
			WHERE	entrps_no = #{entrpsNo}
	</update>

</mapper>