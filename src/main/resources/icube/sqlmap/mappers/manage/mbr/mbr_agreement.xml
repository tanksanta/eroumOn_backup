<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mbr.agreement">

	<sql id="listColumn">
		ma.agreement_no
		, ma.mbr_unique_id
		, ma.terms_yn
		, ma.terms_dt
		, ma.privacy_yn
		, ma.privacy_dt
		, ma.provision_yn
		, ma.provision_dt
		, ma.third_parties_yn
		, ma.third_parties_dt
		, ma.reg_dt
		, ma.mdfcn_dt
	</sql>
	
	<sql id="searchConditions">
		<if test="srchMbrUniqueId != null and srchMbrUniqueId != '' ">
			AND ma.mbr_unique_id = #{srchMbrUniqueId}
		</if>
	</sql>
	
	
	<select id="selectMbrAgreement" parameterType="java.util.HashMap" resultType="mbrAgreementVO">
		SELECT
			<include refid="listColumn" />
		FROM MBR_AGREEMENT ma
		WHERE 1=1
			<include refid="searchConditions" />
		ORDER BY ma.reg_dt DESC
		LIMIT 1;
	</select>
	

	<insert id="insertMbrAgreement" parameterType="mbrAgreementVO">
		INSERT INTO MBR_AGREEMENT(
			mbr_unique_id
			, terms_yn
			, terms_dt
			, privacy_yn
			, privacy_dt
			, provision_yn
			, provision_dt
			, third_parties_yn
			, third_parties_dt
			, reg_dt
			, marketing_reception_yn
			, marketing_reception_dt
			, night_reception_yn
			, night_reception_dt
		)VALUES(
			#{mbrUniqueId}
			, #{termsYn}
			, #{termsDt}
			, #{privacyYn}
			, #{privacyDt}
			, #{provisionYn}
			, #{provisionDt}
			, #{thirdPartiesYn}
			, #{thirdPartiesDt}
			, SYSDATE()
			, #{marketingReceptionYn}
			, #{marketingReceptionDt}
			, #{nightReceptionYn}
			, #{nightReceptionDt}
		)
	</insert>
</mapper>